{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst URL = 'http://127.0.0.1:8000/api/blogs';\nconst initialState = {\n  blogs: [],\n  status: 'idle',\n  // idle, loading, success, fail\n  error: null\n};\nexport const fetchBlogs = createAsyncThunk('blogs/fetchBlogs', async () => {\n  const response = await axios.get(`${URL}/`);\n  return response.data;\n});\nexport const addNewBlog = createAsyncThunk('blogs/addNewBlog', async initialState => {\n  const response = await axios.post(`${URL}/`, initialState);\n  return response.data;\n});\nexport const updateBlog = createAsyncThunk('blogs/updateBlog', async initialState => {\n  const {\n    id\n  } = initialState;\n  try {\n    const response = await axios.put(`${URL}/${id}/`, initialState);\n    return response.data;\n  } catch (err) {\n    return err.message;\n  }\n});\nexport const deleteBlog = createAsyncThunk('blogs/deleteBlog', async initialState => {\n  const {\n    id\n  } = initialState;\n  try {\n    const response = await axios.delete(`${URL}/${id}/`, initialState);\n    return response.data;\n  } catch (err) {\n    return err.message;\n  }\n});\nconst blogsSlice = createSlice({\n  name: 'blogs',\n  initialState,\n  reducers: {},\n  extraReducers(builder) {\n    builder.addCase(fetchBlogs.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(fetchBlogs.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.blogs = state.blogs.concat(action.payload);\n    }).addCase(fetchBlogs.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }).addCase(addNewBlog.fulfilled, (state, action) => {\n      state.blogs.push(action.payload);\n    }).addCase(updateBlog.fulfilled, (state, action) => {\n      const {\n        id\n      } = action.payload;\n      const blogs = state.blogs.filter(blog => blog.id !== id);\n      state.blogs = [...blogs, action.payload];\n    }).addCase(deleteBlog.fulfilled, (state, action) => {\n      const {\n        id\n      } = action.payload;\n      const blogs = state.blogs.filter(blog => blog.id !== id);\n      state.blogs = blogs;\n    });\n  }\n});\nexport const selectAllBlogs = state => state.blogs.blogs;\nexport const getBlogsStatus = state => state.blogs.status;\nexport const getBlogError = state => state.blogs.error;\n\n// Get the id of the blogs \nexport const selectBlogById = (state, blogId) => state.blogs.blogs.find(blog => blog.id === blogId);\nexport default blogsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","URL","initialState","blogs","status","error","fetchBlogs","response","get","data","addNewBlog","post","updateBlog","id","put","err","message","deleteBlog","delete","blogsSlice","name","reducers","extraReducers","builder","addCase","pending","state","action","fulfilled","concat","payload","rejected","push","filter","blog","selectAllBlogs","getBlogsStatus","getBlogError","selectBlogById","blogId","find","reducer"],"sources":["/home/agust/Projects/curso-redux/src/features/blogsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nconst URL = 'http://127.0.0.1:8000/api/blogs'\n\n\nconst initialState = {\n    blogs: [],\n    status: 'idle', // idle, loading, success, fail\n    error: null\n}\n\nexport const fetchBlogs = createAsyncThunk('blogs/fetchBlogs', async () => {\n    const response = await axios.get(`${URL}/`)\n    return response.data\n})\n\nexport const addNewBlog = createAsyncThunk('blogs/addNewBlog', async (initialState) => {\n    const response = await axios.post(`${URL}/`, initialState)\n    return response.data\n})\n\nexport const updateBlog = createAsyncThunk('blogs/updateBlog', async (initialState) => {\n    const { id } = initialState;\n    try {\n        const response = await axios.put(`${URL}/${id}/`, initialState)\n        return response.data\n    } catch (err) {\n        return err.message;\n    }\n})\n\nexport const deleteBlog = createAsyncThunk('blogs/deleteBlog', async (initialState) => {\n    const { id } = initialState;\n    try {\n        const response = await axios.delete(`${URL}/${id}/`,initialState)\n        return response.data\n    } catch (err) {\n        return err.message\n    }\n})\n\nconst blogsSlice = createSlice({\n    name: 'blogs',\n    initialState,\n    reducers: {},\n    extraReducers(builder) {\n        builder\n        .addCase(fetchBlogs.pending, (state, action) => {\n            state.status = 'loading'\n        })\n        .addCase(fetchBlogs.fulfilled, (state, action) => {\n            state.status = 'succeeded'\n            state.blogs = state.blogs.concat(action.payload)\n        })\n        .addCase(fetchBlogs.rejected, (state, action) => {\n            state.status = 'failed'\n            state.error = action.error.message\n        })\n        .addCase(addNewBlog.fulfilled, (state, action) => {\n            state.blogs.push(action.payload)\n        })\n        .addCase(updateBlog.fulfilled, (state, action) => {\n            const { id } = action.payload;\n            const blogs = state.blogs.filter(blog => blog.id !== id);\n            state.blogs = [...blogs, action.payload];\n        })\n        .addCase(deleteBlog.fulfilled, (state, action) => {\n            const { id } = action.payload;\n            const blogs = state.blogs.filter(blog => blog.id !== id);\n            state.blogs = blogs;\n        })\n    }\n})\n\nexport const selectAllBlogs = (state) => state.blogs.blogs;\nexport const getBlogsStatus = (state) => state.blogs.status;\nexport const getBlogError = (state) => state.blogs.error;\n\n// Get the id of the blogs \nexport const selectBlogById = (state, blogId) => \n    state.blogs.blogs.find(blog => blog.id === blogId);\n\n\nexport default blogsSlice.reducer;\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}